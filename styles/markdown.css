/* TODO: adjust colors */
:root {
  --fraction: #85a3dbff;
  --operator-color: #7147f0ff;
  --relation-color: #3b99f6ff;
  --bracket-color: #2563ebff;
  --punctuation-color: #0284c7ff;
  --function-color: #1fb1ffff;
  --math-foreground: #000000ff;
}

.dark {
  --fraction: #2974ffff;
  --operator-color: #7147f0ff;
  --relation-color: #3b99f6ff;
  --bracket-color: #3b82f6ff;
  --punctuation-color: #0284c7ff;
  --function-color: #1fb1ffff;
  --math-foreground: #ffffffff;
}

article {
  hr {
    @apply border-border;
  }

  blockquote {
    @apply border-l-4 border-border pl-4;
  }

  table {
    @apply w-full border-collapse m-0;
    contain: layout;

    thead {
      tr {
        @apply bg-card/50 border-b border-border;

        th {
          @apply px-4 py-3 text-left text-sm font-semibold;
        }
      }
    }

    tbody {
      tr {
        @apply border-b border-border;

        td {
          @apply px-4 py-3 text-sm;
        }

        &:last-child {
          @apply border-b-0;

          td {
            @apply first:rounded-bl-lg last:rounded-br-lg;
          }
        }
      }
    }
  }
  .table-container {
    @apply w-full overflow-x-auto rounded-lg my-6 border-2 border-border relative;
    scrollbar-width: auto;
  }
}

.large-math {
  /* inline math */
  .katex {
    font-size: 1.4em;
  }

  /* block math */
  .katex-display .katex {
    font-size: 1.4em;
    margin: 0.5rem 0;
  }
}

/* scroll wide math expressions */
.katex-display {
  display: block;
  overflow-x: auto;
  overflow-y: hidden;
  white-space: nowrap;
  padding: 0 1em;
  contain: layout style paint;
  scrollbar-width: auto;

  /* right scroll shadow */
  -webkit-mask-image: linear-gradient(
    to right,
    black 0%,
    black calc(100% - 2rem),
    transparent 100%
  );
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-size: 100% 100%;
  mask-image: linear-gradient(
    to right,
    black 0%,
    black calc(100% - 2rem),
    transparent 100%
  );
  mask-repeat: no-repeat;
  mask-size: 100% 100%;
}

.katex-display > .katex {
  display: inline-block;
  min-width: max-content;
}

/* colored markdown KaTeX */
.colored-markdown {
  .katex {
    * {
      border-color: var(--fraction);
      border-bottom: 3px var(--fraction);
    }
    .mathdefault,
    .mord {
      color: var(--math-foreground);
    }
    /* operators (+, -, *, /) */
    .mbin {
      color: var(--operator-color);
      font-weight: bold;
    }

    /* relations (=, <, >) */
    .mrel {
      color: var(--relation-color);
      font-weight: bold;
    }

    /* fractions, roots, parentheses, etc. */
    .mopen,
    .mclose {
      color: var(--bracket-color);
    }

    /* commas, semicolons */
    .mpunct {
      color: var(--punctuation-color);
    }

    /* operators like sin, cos, log, etc. */
    .mop {
      color: var(--function-color);
    }
  }
}

.block {
  h1,
  h2,
  h3 {
    @apply text-base font-semibold;
    margin: 0;
    padding: 0;
  }

  p {
    margin: 0 !important;
  }

  ul,
  ol {
    @apply pl-5 m-0;
  }
  li {
    @apply my-1;
  }
}
